<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa de Propagaci√≥n</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <style>
        #map {
            height: 600px;
            width: 100%;
        }
    </style>
</head>

<body>
    <div id="map"></div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const map = L.map('map').setView([20, 0], 2);

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; OpenStreetMap contributors'
            }).addTo(map);

            const data = [
                { Ref: "Gautam2024", Year: "2023/01", Grid: "India, Rajasthan", Latitude: 26.1269, Longitude: 75.0315, "f (Hz)": 3.5, Duration: "Hours", "Propagation": { "Total distance": 300 }, Image: "https://via.placeholder.com/150" },
                { Ref: "ESO2024", Year: "2021/08", Grid: "GB, Scotland", Latitude: 57.4253, Longitude: -4.2641, "f (Hz)": 8, Duration: "25 s", "Propagation": { "Total distance": 200 }, Image: "https://via.placeholder.com/150" },
                { Ref: "Wang2022", Year: "2020/07", Grid: "Virginia, USA", Latitude: 37.5258, Longitude: -77.4428, "f (Hz)": 22, Duration: "Minutes", "Propagation": { "Total distance": 150 }, Image: "https://via.placeholder.com/150" },
                { Ref: "Sun2025", Year: "2019/08", Grid: "UK", Latitude: 53.885, Longitude: -1.7904, "f (Hz)": 9, Duration: "30 ms", "Propagation": { "Total distance": 120 }, Image: "https://via.placeholder.com/150" }
            ];

            data.forEach(point => {
                const marker = L.marker([point.Latitude, point.Longitude]).addTo(map);

                marker.on('click', function () {
                    L.popup()
                        .setLatLng([point.Latitude, point.Longitude])
                        .setContent(`
                            <strong>${point.Ref}</strong><br>
                            <strong>Year:</strong> ${point.Year}<br>
                            <strong>Grid:</strong> ${point.Grid}<br>
                            <strong>Frequency:</strong> ${point["f (Hz)"]} Hz<br>
                            <strong>Duration:</strong> ${point.Duration}<br>
                            <img src="${point.Image}" alt="Imagen" style="width:100px;height:auto;">
                        `)
                        .openOn(map);

                    L.circle([point.Latitude, point.Longitude], {
                        color: 'blue',
                        fillColor: 'blue',
                        fillOpacity: 0.2,
                        radius: point.Propagation["Total distance"] * 1000 // Convertir km a metros
                    }).addTo(map);
                });
            });
        });
    </script>
</body>

</html>